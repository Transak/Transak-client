'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function () {
  return {
    visitor: {
      'ImportDeclaration|ExportAllDeclaration|ExportNamedDeclaration': function ImportDeclarationExportAllDeclarationExportNamedDeclaration(astPath, astState) {
        if (!astPath.node.source) {
          return;
        }

        var sourceFilePath = astState.file.opts.filename;

        try {
          var packageJson = (0, _findNearestPackageJson.findNearestPackageJsonSync)(sourceFilePath);

          astPath.node.source.value = (0, _resolvePathAlias2.default)(path.dirname(packageJson.path), packageJson.data.name, sourceFilePath, astPath.node.source.value);
        } catch (error) {}
      }
    }
  };
};

var _path = require('path');

var path = _interopRequireWildcard(_path);

var _findNearestPackageJson = require('find-nearest-package-json');

var _resolvePathAlias = require('./resolvePathAlias');

var _resolvePathAlias2 = _interopRequireDefault(_resolvePathAlias);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInZpc2l0b3IiLCJhc3RQYXRoIiwiYXN0U3RhdGUiLCJub2RlIiwic291cmNlIiwic291cmNlRmlsZVBhdGgiLCJmaWxlIiwib3B0cyIsImZpbGVuYW1lIiwicGFja2FnZUpzb24iLCJ2YWx1ZSIsInBhdGgiLCJkaXJuYW1lIiwiZGF0YSIsIm5hbWUiLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7O2tCQUllLFlBQVc7QUFDeEIsU0FBTztBQUNMQSxhQUFTO0FBQ1AscUVBRE8sdUVBRUxDLE9BRkssRUFHTEMsUUFISyxFQUlMO0FBQ0EsWUFBSSxDQUFDRCxRQUFRRSxJQUFSLENBQWFDLE1BQWxCLEVBQTBCO0FBQ3hCO0FBQ0Q7O0FBRUQsWUFBTUMsaUJBQWlCSCxTQUFTSSxJQUFULENBQWNDLElBQWQsQ0FBbUJDLFFBQTFDOztBQUVBLFlBQUk7QUFDRixjQUFNQyxjQUFjLHdEQUEyQkosY0FBM0IsQ0FBcEI7O0FBRUFKLGtCQUFRRSxJQUFSLENBQWFDLE1BQWIsQ0FBb0JNLEtBQXBCLEdBQTRCLGdDQUMxQkMsS0FBS0MsT0FBTCxDQUFhSCxZQUFZRSxJQUF6QixDQUQwQixFQUUxQkYsWUFBWUksSUFBWixDQUFpQkMsSUFGUyxFQUcxQlQsY0FIMEIsRUFJMUJKLFFBQVFFLElBQVIsQ0FBYUMsTUFBYixDQUFvQk0sS0FKTSxDQUE1QjtBQU1ELFNBVEQsQ0FTRSxPQUFPSyxLQUFQLEVBQWMsQ0FBRTtBQUNuQjtBQXJCTTtBQURKLEdBQVA7QUF5QkQsQzs7QUE5QkQ7O0lBQVlKLEk7O0FBQ1o7O0FBQ0EiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBmaW5kTmVhcmVzdFBhY2thZ2VKc29uU3luYyB9IGZyb20gJ2ZpbmQtbmVhcmVzdC1wYWNrYWdlLWpzb24nXG5pbXBvcnQgcmVzb2x2ZVBhdGhBbGlhcyBmcm9tICcuL3Jlc29sdmVQYXRoQWxpYXMnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHZpc2l0b3I6IHtcbiAgICAgICdJbXBvcnREZWNsYXJhdGlvbnxFeHBvcnRBbGxEZWNsYXJhdGlvbnxFeHBvcnROYW1lZERlY2xhcmF0aW9uJyhcbiAgICAgICAgYXN0UGF0aCxcbiAgICAgICAgYXN0U3RhdGVcbiAgICAgICkge1xuICAgICAgICBpZiAoIWFzdFBhdGgubm9kZS5zb3VyY2UpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNvdXJjZUZpbGVQYXRoID0gYXN0U3RhdGUuZmlsZS5vcHRzLmZpbGVuYW1lXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwYWNrYWdlSnNvbiA9IGZpbmROZWFyZXN0UGFja2FnZUpzb25TeW5jKHNvdXJjZUZpbGVQYXRoKVxuXG4gICAgICAgICAgYXN0UGF0aC5ub2RlLnNvdXJjZS52YWx1ZSA9IHJlc29sdmVQYXRoQWxpYXMoXG4gICAgICAgICAgICBwYXRoLmRpcm5hbWUocGFja2FnZUpzb24ucGF0aCksXG4gICAgICAgICAgICBwYWNrYWdlSnNvbi5kYXRhLm5hbWUsXG4gICAgICAgICAgICBzb3VyY2VGaWxlUGF0aCxcbiAgICAgICAgICAgIGFzdFBhdGgubm9kZS5zb3VyY2UudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19